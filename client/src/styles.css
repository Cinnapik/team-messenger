:root{
  --bg:#04121a; --panel:#071622; --muted:#99aebd; --text:#eaf6ff;
  --accent:#0db0ff; --accent-2:#66e0ff; --me:#2b9cff; --card:#0b1620;
  --task:#ffd166; --danger:#ff6b6b; --border:rgba(255,255,255,0.04); --date:#7ea6c5;
  --notif:#12c2a6;
  font-family:Inter, "Segoe UI", Roboto, Arial, sans-serif;
}
*{box-sizing:border-box}
html,body,#root{height:100%;margin:0;background:linear-gradient(180deg,#021018,var(--bg));color:var(--text);-webkit-font-smoothing:antialiased}
.app{height:100vh;display:flex;align-items:stretch;justify-content:center;padding:12px}

/* layout */
.shell{display:grid;grid-template-columns:64px 280px minmax(920px,1fr) 360px;gap:8px;width:100%;max-width:1700px;height:100%}

/* profile narrow */
.col-profile{display:flex;flex-direction:column;gap:8px;align-items:center}
.profile-block{width:100%;display:flex;flex-direction:column;align-items:center;padding:8px;border-radius:10px;background:var(--panel);border:1px solid var(--border)}
.profile-avatar{width:56px;height:56px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:800;color:#041a23;background:linear-gradient(135deg,var(--accent),var(--accent-2));font-size:18px;cursor:pointer}
.profile-name{font-size:11px;color:var(--muted);margin-top:6px;max-width:64px;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

/* profile panel anchored to left (non-transparent, flush) */
.profile-panel{position:fixed;left:0;top:12px;height:calc(100% - 24px);width:320px;background:var(--panel);border-left:0;border-radius:0;border-right:1px solid var(--border);box-shadow:0 18px 48px rgba(0,0,0,0.6);z-index:80;display:none;flex-direction:column;overflow:auto}
.profile-panel.open{display:flex}
.profile-panel .header{padding:18px;border-bottom:1px solid rgba(255,255,255,0.02)}
.profile-panel .body{padding:14px;display:flex;flex-direction:column;gap:10px}

/* chats column */
.col-chats{display:flex;flex-direction:column}
.chats-panel{background:var(--panel);border-radius:10px;padding:8px;border:1px solid var(--border);height:100%;display:flex;flex-direction:column}
.search{padding:8px;border-radius:8px;background:rgba(255,255,255,0.01);border:1px solid rgba(255,255,255,0.02)}
.search input{width:100%;background:transparent;border:none;color:var(--text);outline:none;padding:6px;font-size:13px}
.chat-list{flex:1;overflow:auto;margin-top:8px;display:flex;flex-direction:column;gap:6px;padding-right:6px}

/* chat item */
.chat-item{display:flex;gap:8px;align-items:center;padding:8px;border-radius:8px;cursor:pointer;transition:background .12s}
.chat-item:hover{background:rgba(255,255,255,0.01)}
.chat-item.active{background:linear-gradient(90deg, rgba(13,176,255,0.06), rgba(13,176,255,0.02));border-left:3px solid var(--accent);padding-left:6px}
.avatar{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#041a23;font-weight:700}
.chat-meta{min-width:0}
.chat-name{font-weight:700;font-size:14px}
.chat-snippet{color:var(--muted);font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.chat-count{font-size:12px;color:var(--muted)}

/* center chat (maximized) */
.chat-center{background:var(--panel);border-radius:10px;padding:0;border:1px solid var(--border);display:flex;flex-direction:column;min-width:0;align-self:stretch}
.chat-header{padding:14px;border-bottom:1px solid rgba(255,255,255,0.02);display:flex;justify-content:space-between;align-items:center}
.chat-title{font-weight:800;font-size:18px}
.chat-sub{color:var(--muted);font-size:13px}

/* messages area: container scrollable (older up) */
.messages-area{flex:1;overflow:auto;padding:18px 26px;display:flex;flex-direction:column;gap:10px;scroll-behavior:smooth}
.messages-area::-webkit-scrollbar{width:10px}
.messages-area::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#12323b,#0f3942);border-radius:8px}

/* bubbles */
.msg{display:flex;gap:10px;align-items:flex-start;min-width:0}
.msg.me{margin-left:auto;flex-direction:row-reverse}
.msg-avatar{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#041a23;font-weight:800}
.bubble{background:var(--card);border:1px solid rgba(255,255,255,0.02);padding:10px;border-radius:12px;min-width:0;max-width:900px;white-space:pre-wrap;word-break:break-word;overflow-wrap:anywhere}
.bubble.me{background:linear-gradient(180deg,var(--me),#1b78d6);color:#041a23}
.meta{display:flex;gap:8px;align-items:center;margin-bottom:6px}
.user{font-weight:700}
.time{color:var(--date);font-size:12px;margin-left:auto}
.task-badge{margin-top:8px;padding:6px;border-radius:8px;background:linear-gradient(90deg,#fff1d6,#fff5e6);color:#3b2a00;font-weight:700;border:1px solid rgba(0,0,0,0.06)}

/* composer fixed bottom center */
.composer-row{display:flex;gap:10px;padding:12px;border-top:1px solid rgba(255,255,255,0.02);background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}
.composer-row input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text);outline:none}
.composer-row button{padding:10px 14px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent-2));border:none;color:#041a23;font-weight:700;cursor:pointer}

/* chat info panel (opens from title) anchored left of chats column */
.chat-info{position:fixed;left:64px;top:20px;height:calc(100% - 40px);width:420px;background:var(--panel);border-radius:8px;border-right:1px solid var(--border);box-shadow:0 20px 60px rgba(0,0,0,0.6);z-index:90;display:none;flex-direction:column;overflow:auto}
.chat-info.open{display:flex}
.chat-info .header{padding:16px;border-bottom:1px solid rgba(255,255,255,0.02)}
.chat-info .body{padding:12px;display:flex;flex-direction:column;gap:10px}

/* tasks/assistant */
.col-tasks{background:var(--panel);border-radius:10px;padding:12px;border:1px solid var(--border);display:flex;flex-direction:column;gap:12px;overflow:auto}
.assistant{padding:10px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:1px solid rgba(255,255,255,0.02)}
.tasks-list{display:flex;flex-direction:column;gap:10px;overflow:auto;max-height:calc(100vh - 240px);padding-right:6px}
.task-item{background:linear-gradient(180deg,#00142911,#00142908);padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
.task-title{font-weight:700}
.task-meta{font-size:12px;color:var(--muted)}

/* participants popover */
.participants-pop{position:absolute;background:var(--panel);border:1px solid var(--border);padding:8px;border-radius:8px;box-shadow:0 12px 36px rgba(0,0,0,0.5);z-index:100}

/* responsive */
@media (max-width:1200px){ .shell{grid-template-columns:64px 220px 1fr} .col-tasks{display:none} }
@media (max-width:800px){ .shell{grid-template-columns:1fr} .col-chats,.col-profile,.col-tasks{display:none} .composer-row{position:fixed;left:12px;right:12px;bottom:12px;z-index:60} }
